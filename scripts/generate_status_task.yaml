# yaml-language-server: $schema=
# Single-agent task to regenerate STATUS.md from codebase facts
# Run with: uv run alphaheng tasks add scripts/generate_status_task.yaml

tasks:
  - name: generate-status-md
    prompt: |
      Generate a STATUS.md file for the metal_marlin project.

      First, run the fact collection script:
      ```
      cd /Users/kearm/AlphaHENG/contrib/metal_marlin
      uv run python scripts/collect_status_facts.py > /tmp/status_facts.xml
      ```

      Read the XML output. It contains:
      - mlx_references: Files still containing MLX (goal: zero)
      - metal_shaders: Which shaders compile and which fail
      - file_counts: Codebase size metrics
      - quantized_models: Available pre-quantized models
      - dependencies: From pyproject.toml
      - task_queue: AlphaHENG agent swarm status (if running)

      Write STATUS.md that:
      1. Summarizes current project state based on the XML facts
      2. Highlights blockers (failing shaders, remaining MLX references)
      3. Shows progress metrics (X of Y shaders working, etc.)
      4. Is concise but informative

      The tone should be:
      - Technical and direct
      - Focused on actionable information
      - Clear about what's working vs blocked

      Do NOT include:
      - Historical phases or old plans
      - Lengthy explanations of what MLX is
      - Aspirational roadmaps

      Write to: contrib/metal_marlin/STATUS.md
    priority: P2
    dependencies: []
